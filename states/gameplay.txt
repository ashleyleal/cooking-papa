# Purpose: Gameplay child class that inherits from State class 

import random, time
from states.state import State
from button import Button
from assets.assets import *

class Gameplay(State):

    def __init__(self, game):
        State.__init__(self, game)
        
        self.selected_recipe = None
        self.current_recipe = None
        self.enter_kitchen = False

    def update(self, actions):
        if actions["menu"]:
            main_menu = self.game.state_stack[0]
            main_menu.enter_state()

        if actions["recipe"]:
            self.selected_recipe = self.generate_order()
            self.current_recipe = self.selected_recipe

    def render(self, surface):

        if not self.game.actions["recipe"] and not self.enter_kitchen:
            surface.fill(WHISTLES_GOLD)
            self.generate_customer(surface)
            self.show_order(surface)
            self.game.draw_image(restaurant_counter, 1, surface, self.game.GAME_X / 2, 100)
            if return_button.draw(surface):
                self.game.actions["menu"] = True 
 
        if self.enter_kitchen:
            if self.current_recipe == "Burger":
                    self.cook_burger(surface)
            
            elif self.selected_recipe == "Pizza":
                self.cook_pizza(surface)

            elif self.selected_recipe == "Stew":
                self.cook_stew(surface)


    def generate_order(self):
        possible_recipes = {

            "Burger": {
                "Cook Patty": "Wait unti the bar reaches the middle to ensure that the patty is cooked.",
                "Slice Tomato": "Click two points to make a slice.",
                "Assemble Burger": "Put the ingredients of the burger together"
            },
            
            "Pizza": {
                "Roll Dough": "Scroll your mouse to move the rolling pin back and forth until the dough is rolled.",
                "Add Toppings": "Drag the toppings to the pizza.",
                "Place in Oven": "Put the pizza in the oven"
            },

            "Stew": {
                "Cut vegetables": "",
                "": "",
                "": "",
            },

            "Fried Chicken": {
                "": "",
                "": "",
                "": "",
        
            }
        }

        return(random.choice(list(possible_recipes.keys())))

    def show_order(self, surface):
        if self.selected_recipe == "Burger":
            self.game.draw_image(burger, 1, surface, self.game.GAME_X/ 2 + 60, self.game.GAME_Y / 2 - 50)
            if check_button.draw(surface):
                self.game.actions["recipe"] = True

    def generate_customer(self, surface):
        possible_customers = []
        # selected customer is a random choice of the possible customers
        self.game.draw_image(placeholder_customer, 1, surface, self.game.GAME_X / 2, self.game.GAME_Y / 2)
        self.game.draw_image(speech_bubble, 1, surface, self.game.GAME_X/ 2 + 60, self.game.GAME_Y / 2 - 50)




    def cook_pizza(self, surface):
        
        surface.fill(MINERAL_RED)

    def cook_stew(self, surface):
        pass

    def clear_recipe(self):
        self.current_recipe = None
        self.game.actions["recipe"] = False



